<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>RSI Customer • Other Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Libs -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Ripple + Admin CSS -->
    <link href="../assets/ripple.css" rel="stylesheet">
    <link href="page.css" rel="stylesheet">
</head>

<body>
    <div class="container-fluid dashboard-layout">
        <div class="row">
            <!-- Sidebar -->
            <div id="sidebar-placeholder"></div>

            <!-- Main -->
            <div class="col-sm-9 col-md-10 main-content">
                <div class="page-header">
                    <h2>Welcome Text</h2>
                    <p>Set a default Welcome and End of Registration text in the Client Portal. </p>
                </div>

                <!-- Welcome text -->
                <div class="panel">
                    <div class="panel-heading">
                        <i class="fa fa-home"></i> Welcome Text
                    </div>
                    <div class="panel-body">
                        <!-- Live Preview -->
                        <div class="form-group">
                            <label>Preview (displayed in Client Portal)</label>
                            <blockquote id="welcomePreview" class="blockquote-note" style="margin-top:0;">
                                Hi, {User}! Welcome to {Vessel} Smart Induction.<br>
                                Your registration is complete. To begin your journey, please provide your embarkation
                                details and finish the onboarding process
                            </blockquote>
                        </div>
                        <hr />

                        <!-- Textarea -->
                        <div class="form-group">
                            <label for="welcomeText">Edit Welcome Text</label>
                            <textarea id="welcomeText" class="form-control"
                                rows="4">Hi, {User}! Welcome to {Vessel} Smart Induction.
Your registration is complete. To begin your journey, please provide your embarkation details and finish the onboarding process</textarea>
                        </div>

                        <button class="btn btn-primary" id="saveWelcome">
                            <i class="fa fa-save"></i> Save Welcome Text
                        </button>
                    </div>
                </div>

                <!-- Verification and Thank you -->
                   <div class="panel">
          <div class="panel-heading"><i class="fa fa-check-circle"></i> Verification & Thank You Page</div>
          <div class="panel-body">
            <div class="form-group">
              <label>End-of-Registration Message (shown to Crew)</label>
              <textarea id="finalMessage" class="form-control" rows="4" placeholder="Thank you for completing your registration..."></textarea>
            </div>
            <div class="checkbox">
              <label><input type="checkbox" id="finalCheckbox" checked> Include checkbox: “I approve sharing my information with the vessel and confirm accuracy.”</label>
            </div>
            <button class="btn btn-primary" id="saveFinal"><i class="fa fa-save"></i> Save Changes</button>
          </div>
        </div>

            </div><!-- /main -->
        </div>
    </div>

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script>
        $(function () {
            // Load sidebar
            fetch('customer-sidebar.html')
                .then(response => response.text())
                .then(data => {
                    const sidebarPlaceholder = document.getElementById('sidebar-placeholder');
                    sidebarPlaceholder.innerHTML = data;

                    // Active menu highlight
                    const currentPage = 'customer-settings';
                    const activeLink = sidebarPlaceholder.querySelector(`[data-page="${currentPage}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active');
                    }
                })
                .catch(error => console.error('Error fetching sidebar:', error));

            // Welcome text handling
            function renderPreview() {
                const txt = $('#welcomeText').val().trim();
                $('#welcomePreview').html(
                    txt ? txt.replace(/\n/g, '<br>') : '<em>The welcome text will appear here…</em>'
                );
            }

            // Live update on typing
            $('#welcomeText').on('input', renderPreview);

            // Save action
            $('#saveWelcome').on('click', function () {
                showAlert('Welcome text saved (demo). Crew Portal will be updated shortly!.', 'success');
                renderPreview();
            });

            // Init preview with default text
            renderPreview();

            // Verification & Thank You handling
                  $('#saveFinal').on('click', ()=> showAlert('Final message & checkbox saved (demo).'));

        });
    </script>
    <script>
        //    ShowAlert
            function showAlert(msg, type = 'success') {
                const alert = $(`<div class="alert alert-${type}" style="position:fixed;top:20px;right:20px;z-index:9999;">${msg}</div>`);
                $('body').append(alert);
                setTimeout(() => alert.fadeOut(500, () => alert.remove()), 2000);
            }
    </script>
</body>

</html>