<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>RSI Client • Vessel Information</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Libs -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

    <!-- Ripple core + Page CSS -->
    <link href="../assets/ripple.css" rel="stylesheet" />
    <link href="page.css" rel="stylesheet" />
</head>

<body>
    <div class="container-fluid dashboard-layout">
        <div class="row">
            <!-- Sidebar -->
            <div id="sidebar-placeholder"></div>

            <!-- Main -->
            <div class="col-sm-9 col-md-10 main-content">

                <!-- Welcome + Alerts -->
                <div class="tab-pane active" id="welcome">
                    <div class="page-header">
                        <h2>Visual Journey Aboard</h2>
                        <p>Here you will find all the information related to your journey aboard</p>
                    </div>

                    <!-- Next Voyage -->
                    <div class="panel panel-default voyage-panel">
                        <div class="panel-heading">
                            <h4 class="panel-title"><i class="fa fa-calendar"></i> Your Embarkation Details</h4>
                        </div>
                        <div class="panel-body">
                            <div class="voyage-details">
                                <div><strong>Date</strong> <span id="embarkDateDisplay">—</span></div>
                                <div><strong>Time</strong> <span id="embarkTimeDisplay">—</span></div>
                                <div><strong>Location</strong> <span id="embarkLocationDisplay">—</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Vessel Info Display -->
                    <div class="panel">
                        <div class="panel-body">
                            <div class="row">
                                <!-- About -->
                                <div class="col-md-6">
                                    <div id="aboutPreview" class="well scrollable-container">
                                        <p class="text-muted">Loading vessel information...</p>
                                    </div>
                                </div>
                                <!-- Photos -->
                                <div class="col-md-6">
                                    <div id="vesselCarousel" class="carousel slide vessel-carousel"
                                        data-ride="carousel">
                                        <div class="carousel-inner" id="carouselItems">
                                            <div class="item active">
                                                <div class="well text-center text-muted">No photos uploaded</div>
                                            </div>
                                        </div>
                                        <ol class="carousel-indicators" id="carouselIndicators"></ol>
                                        <a class="left carousel-control" href="#vesselCarousel" data-slide="prev">
                                            <span class="glyphicon glyphicon-chevron-left"></span>
                                        </a>
                                        <a class="right carousel-control" href="#vesselCarousel" data-slide="next">
                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div><!-- /main -->
        </div>
    </div>

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script>
        $(function () {
            // Load sidebar
            fetch('crew-sidebar.html')
                .then(r => r.text())
                .then(data => {
                    $('#sidebar-placeholder').html(data);
                    $('[data-page="crew-vessel-info"]').addClass('active');
                });

            // Load vessel info from localStorage
            let config = null;
            try {
                config = JSON.parse(localStorage.getItem("vesselConfig"));
            } catch (e) {
                config = null;
            }

            // About
            $('#aboutPreview').html(config && config.aboutVessel
                ? config.aboutVessel
                : '<p class="text-muted">No information available.</p>');

            // Carousel
            const carouselItems = $('#carouselItems').empty();
            const indicators = $('#carouselIndicators').empty();
            if (config && config.photos && config.photos.length) {
                config.photos.forEach((p, i) => {
                    carouselItems.append(`<div class="item ${i === 0 ? 'active' : ''}"><img src="${p}" alt="Vessel Photo ${i + 1}"></div>`);
                    indicators.append(`<li data-target="#vesselCarousel" data-slide-to="${i}" class="${i === 0 ? 'active' : ''}"></li>`);
                });
                $('#vesselCarousel').carousel({ interval: 4000 });
            } else {
                carouselItems.append('<div class="item active"><div class="well text-center text-muted">No photos uploaded</div></div>');
            }

            // Embarkation Details
            if (config && config.embarkation) {
                $('#embarkDateDisplay').text(config.embarkation.date || '—');
                $('#embarkTimeDisplay').text(config.embarkation.time || '—');
                $('#embarkLocationDisplay').text(config.embarkation.location || '—');
            } else {
                $('#embarkDateDisplay').text('—');
                $('#embarkTimeDisplay').text('—');
                $('#embarkLocationDisplay').text('—');
            }
        });
    </script>

</body>

</html>